{"ast":null,"code":"var _jsxFileName = \"/var/www/Node/training-react/task-list-v2/code/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport TaskList from \"./components/Tasks/TasksList\";\nimport TasksInput from \"./components/Tasks/TasksInput\";\nimport classes from \"./App.module.css\";\nimport HourGlass from \"./components/UI/Spinners/HourGlass\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = \"https://task-list-53682-default-rtdb.europe-west1.firebasedatabase.app/\";\nconst App = () => {\n  _s();\n  const [tasks, setNewTask] = useState({});\n  const [pending, setPending] = useState(false);\n  const [error, setError] = useState(\"\");\n  const fetchTasksHandler = async function () {\n    let method = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"GET\";\n    let task = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      id: \"\",\n      text: \"\"\n    };\n    try {\n      setPending(true);\n      setError(null);\n      let response = null;\n      if (method === \"DELETE\") {\n        response = await fetch(BASE_URL + \"tasks/\" + task.id + \".json\", {\n          method\n        });\n      } else if (method === \"PATCH\") {\n        response = await fetch(BASE_URL + \"tasks/\" + task.id + \".json\", {\n          method,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            title: task.text\n          })\n        });\n      } else {\n        response = await fetch(BASE_URL + \"tasks.json\", {\n          method,\n          headers: {\n            \"Content-Type\": method !== \"GET\" ? \"application/json\" : \"\"\n          },\n          body: method !== \"GET\" ? JSON.stringify({\n            title: task.text\n          }) : null\n        });\n      }\n\n      // console.log(response);\n\n      if (response.ok) {\n        const data = await response.json();\n        if (method === \"GET\") {\n          setNewTask(data);\n        } else {\n          fetchTasksHandler();\n        }\n        // setNewTask(data);\n        // console.log(data);\n      }\n    } catch (error) {\n      setError({\n        message: error.message || \"Something went wrong\"\n      });\n    }\n    setPending(false);\n  };\n  useEffect(() => {\n    fetchTasksHandler();\n  }, []);\n  const addTaskHandler = enteredText => {\n    fetchTasksHandler(\"POST\", {\n      text: enteredText\n    });\n  };\n  const deleteItemHandler = taskId => {\n    fetchTasksHandler(\"DELETE\", {\n      id: taskId\n    });\n  };\n  const updateItemHandler = (taskId, taskText) => {\n    fetchTasksHandler(\"PATCH\", {\n      id: taskId,\n      text: taskText\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: classes[\"task-form\"],\n      children: /*#__PURE__*/_jsxDEV(TasksInput, {\n        onAddTask: addTaskHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), pending === true && /*#__PURE__*/_jsxDEV(HourGlass, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: classes[\"tasks-content\"],\n      children: [!pending && tasks !== null && error === null && /*#__PURE__*/_jsxDEV(TaskList, {\n        items: tasks,\n        onDeleteItem: deleteItemHandler,\n        onEditItem: updateItemHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), !pending && tasks === null && !error && /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: \"center\",\n          padding: \"1em\",\n          border: \"1px solid #339900\",\n          backgroundColor: \"#99cc33\"\n        },\n        children: \"No tasks availables. Add one?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), !pending && error !== null && /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: \"center\",\n          padding: \"1em\",\n          border: \"1px solid #339900\",\n          backgroundColor: \"#99cc33\"\n        },\n        children: error.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"2VB4eb9ctPPz9UpKQ9KIchzoe2g=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","TaskList","TasksInput","classes","HourGlass","BASE_URL","App","tasks","setNewTask","pending","setPending","error","setError","fetchTasksHandler","method","task","id","text","response","fetch","headers","body","JSON","stringify","title","ok","data","json","message","addTaskHandler","enteredText","deleteItemHandler","taskId","updateItemHandler","taskText","textAlign","padding","border","backgroundColor"],"sources":["/var/www/Node/training-react/task-list-v2/code/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport TaskList from \"./components/Tasks/TasksList\";\nimport TasksInput from \"./components/Tasks/TasksInput\";\nimport classes from \"./App.module.css\";\nimport HourGlass from \"./components/UI/Spinners/HourGlass\";\n\nconst BASE_URL = \"https://task-list-53682-default-rtdb.europe-west1.firebasedatabase.app/\"\n\nconst App = () => {\n  const [tasks, setNewTask] = useState({});\n  const [pending, setPending] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const fetchTasksHandler = async (\n    method = \"GET\",\n    task = { id: \"\", text: \"\" }\n  ) => {\n    try {\n      setPending(true);\n      setError(null);\n\n      let response = null;\n\n      if (method === \"DELETE\") {\n        response = await fetch(\n          BASE_URL + \"tasks/\"+\n            task.id +\n            \".json\",\n          { method }\n        );\n      } else if (method === \"PATCH\") {\n        response = await fetch(\n          BASE_URL + \"tasks/\"+\n            task.id +\n            \".json\",\n          {\n            method,\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({ title: task.text }),\n          }\n        );\n      } else {\n        response = await fetch(\n          BASE_URL + \"tasks.json\",\n          {\n            method,\n            headers: {\n              \"Content-Type\": method !== \"GET\" ? \"application/json\" : \"\",\n            },\n            body: method !== \"GET\" ? JSON.stringify({ title: task.text }) : null,\n          }\n        );\n      }\n\n      // console.log(response);\n\n      if (response.ok) {\n        const data = await response.json();\n        if (method === \"GET\") {\n          setNewTask(data);\n        } else {\n          fetchTasksHandler();\n        }\n        // setNewTask(data);\n        // console.log(data);\n      }\n    } catch (error) {\n      setError({\n        message: error.message || \"Something went wrong\",\n      });\n    }\n\n    setPending(false);\n  };\n\n  useEffect(() => {\n    fetchTasksHandler();\n  }, []);\n\n  const addTaskHandler = (enteredText) => {\n    fetchTasksHandler(\"POST\", { text: enteredText });\n  };\n\n  const deleteItemHandler = (taskId) => {\n    fetchTasksHandler(\"DELETE\", { id: taskId });\n  };\n\n  const updateItemHandler = (taskId, taskText) => {\n    fetchTasksHandler(\"PATCH\", { id: taskId, text: taskText });\n  };\n\n  return (\n    <main>\n      <section className={classes[\"task-form\"]}>\n        <TasksInput onAddTask={addTaskHandler} />\n      </section>\n      {pending === true && <HourGlass />}\n      <section className={classes[\"tasks-content\"]}>\n        {!pending && tasks !== null && error === null && (\n          <TaskList\n            items={tasks}\n            onDeleteItem={deleteItemHandler}\n            onEditItem={updateItemHandler}\n          />\n        )}\n        {!pending && tasks === null && !error && (\n          <h2\n            style={{\n              textAlign: \"center\",\n              padding: \"1em\",\n              border: \"1px solid #339900\",\n              backgroundColor: \"#99cc33\",\n            }}\n          >\n            No tasks availables. Add one?\n          </h2>\n        )}\n        {!pending && error !== null && (\n          <h2\n            style={{\n              textAlign: \"center\",\n              padding: \"1em\",\n              border: \"1px solid #339900\",\n              backgroundColor: \"#99cc33\",\n            }}\n          >\n            {error.message}\n          </h2>\n        )}\n      </section>\n    </main>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}